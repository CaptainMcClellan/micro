filetype: tcl
filetype: tcl

detect: 
    filename: "\\.tcl$"
    header: "^#!.*/(env +)?tclsh( |$)"

rules:
    - statement: "\\b(after|append|array|auto_(execok|import|load(_index)?|qualify)|binary|break|case|catch|cd|clock|close|concat|continue|else|encoding|eof|error|eval|exec|exit|expr|fblocked|fconfigure|fcopy|file|fileevent|flush|for|foreach|format|gets|glob|global|history|if|incr|info|interp|join|lappend|lindex|linsert|list|llength|load|lrange|lreplace|lsearch|lset|lsort|namespace|open|package|pid|puts|pwd|read|regexp|regsub|rename|return|scan|seek|set|socket|source|split|string|subst|switch|tclLog|tell|time|trace|unknown|unset|update|uplevel|upvar|variable|vwait|while)\\b"
    - statement: "\\barray (anymore|donesearch|exists|get|names|nextelement|set|size|startsearch|statistics|unset)\\b"
    - statement: "\\bstring (bytelength|compare|equal|first|index|is|last|length|map|match|range|repeat|replace|to(lower|title)?|toupper|trim(left|right)|will|word(end|start))\\b"
    - statement: "\\b(alarm|auto_load_pkg|bsearch|catclose|catgets|catopen|ccollate|cconcat|cequal|chgrp|chmod|chown|chroot|cindex|clength|cmdtrace|commandloop|crange|csubstr|ctoken|ctype|dup|echo|execl|fcntl|flock|fork|fstat|ftruncate|funlock|host_info|id|infox|keyldel|keylget|keylkeys|keylset|kill|lassign|lcontain|lempty|lgets|link|lmatch|loadlibindex|loop|lvar(cat|pop|push)|max|min|nice|pipe|profile|random|readdir|replicate|scan(context|file|match)|select|server_(accept|create)|signal|sleep|sync|system|tclx_(findinit|fork|load_tndxs|sleep|system|wait)|times|translit|try_eval|umask|wait)\\b"
    - identifier.class: "proc[[:space:]]|(\\{|\\})"
    - symbol.operator: "(\\(|\\)|\\;|`|\\\\|\\$|<|>|!|=|&|\\|)"
    - constant.number: "\\b[0-9]+(\\.[0-9]+)?\\b"
    - constant.string: "\"(\\\\.|[^\"])*\"|'(\\\\.|[^'])*'"
    - identifier.var: "\\$\\{?[0-9A-Z_!@#$*?-]+\\}?"
    - comment: "(^|;)[[:space:]]*#.*"
    - indent-char.whitespace: "[[:space:]]+$"
